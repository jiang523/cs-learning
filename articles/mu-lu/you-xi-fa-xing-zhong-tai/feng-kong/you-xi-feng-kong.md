# 游戏风控

### 常见的黑产行为

1. 汇率差，因为苹果的汇率不是实时的，黑产可以通过外币和苹果的汇率差来做代充
2. 苹果退款，苹果每个账号可以一次退款，退款了但是游戏内的道具还在，黑产通过大量新账号去刷退款，会导致直接的收入损失，另外退款率过高苹果会提高抽成比例，导致游戏的收入遭到巨大损失
3. 代充自己支付生成票据仓库，商家将票据卖给代充用户，生成预订单后用票据请求服务器票据验证接口，服务器验证票据通过给玩家发货。
4. 小额代充，苹果的小额可以免密支付，即使银行卡没有足够的钱也可以支付成功，并且银行卡钱足够后也不会再次扣除。玩家找代充进行小额代充，花很少的钱既可以支付成功，游戏发送道具，但是苹果并没有收到钱，也不能给游戏做结算。
5. 对安卓SDK进行破包，伪造请求  ==> 通过设备指纹识别

现有的问题

1. 经常需要查询任意时间窗口内用户的数据，且风控对性能要求高，不能阻塞主流程，因此需要更好的窗口查询数据库----时序数据库(OpenTSDB)
2. 规则引擎如何建立？如何尽快的应对突发的风险事件？规则是否需要进行版本控制？
3. 风险用户如何更好的识别？分值系统如何建立？
4. 对风险用户是如何处置的？封号？人脸识别？
5. 黑名单白名单过滤？
6. 设备指纹是如何关联的？请求数据如何异步上报给数据平台？
7. 风控的实时性需要更高，很多时候从代充第一笔订单到识别出风险用户，到对风险用户做出处置的流程存在一定的时间间隔，目前的模型消耗时间过长，实时性不够(打点 -> 数据清洗 -> 模型运行 -> 风险识别 -> 风险处置)，可能在处理的过程中代充又充了一定数量的订单



### 常用的代充风控方案

1. 针对小额代充，限制玩家指定时间内小额充值的笔数
2. 针对退款，限制一个用户id退款的笔数
3. 针对刷票据，可以在苹果票据加入token，风控系统可以验证token，如果token验证不通过，说明当前是代充用设备登录了玩家的账号进行充值，此时可以将代充的设备号进行封禁，提高代充的成本
4. 代充发现设备被风控，会不断尝试破解风控策略，如篡改创建订单和票据验证时的设备号，可以绕过设备号封禁的逻辑。此时可以收集该用户id的常用设备号，如果用户用大量不同设备充值，则此用户id将被禁止充值，同时用户可以联系客服进行解封一个设备，并对其进行警告。





苹果代充

<figure><img src="../../../.gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

